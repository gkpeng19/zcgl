@using App.Admin;
@using App.Common;
@using App.Models.Sys;
@{
    ViewBag.Title = "样例程序";
    Layout = "~/Views/Shared/_Index_LayoutEdit.cshtml";

    List<permModel> perm = (List<permModel>)ViewBag.Perm;
    if (perm == null)
    {
        perm = new List<permModel>();
    }
}

<script type='text/javascript' src="/scripts/swfupload/swfupload.js"></script>
<script type='text/javascript' src="/scripts/swfupload/swfupload.queue.js"></script>
<script type="text/javascript" src="/scripts/swfupload/swfupload.handlers.js"></script>
<script>
 //初始化上传控件
    $(function () {
        InitSWFUpload("/Core/upload_ajax.ashx", "Filedata", "11111111KB", "/scripts/swfupload/swfupload.swf", 1, 1);
    });
</script>
<form name="form1" method="post" id="form1">
    <table>
        <tr>
            <th>单个文件：</th>
            <td>
                <input name="txtImgUrl" type="text" maxlength="255" id="txtImgUrl" class="txtInput normal left">
                <a href="javascript:$('#FileUpload').trigger('click').void(0);;" class="files"></a>
                    <input class="displaynone" type="file" id="FileUpload" name="FileUpload" onchange="Upload('SingleFile', 'txtImgUrl', 'FileUpload');">
                <span class="uploading">正在上传，请稍候...</span>
            </td>
        </tr>
        <tr>
            <th valign="top" style="padding-top: 10px;">多个文件：</th>
            <td>
                <input type="text" class="txtInput normal left">
                <div class="upload_btn">
                    <span id="upload"></span>
                </div>
                <label>可以上传多张图片。</label>
                <div class="clear"></div>
                <!--封面隐藏值.开始-->
                <!--
                    <input type="hidden" name="focus_photo" id="focus_photo" value=""/>
                    -->
                <input type="hidden" name="focus_photo" id="focus_photo">
                <!--封面隐藏值.结束-->
                <!--上传提示.开始-->
                <div id="show"></div>
                <!--上传提示.结束-->
                <!--图片列表.开始-->
                <div id="show_list">
                    <ul>
                    </ul>
                </div>
                <!--图片列表.结束-->
            </td>
        </tr>
    </table>
</form>
@*<div id="modalwindow" class="easyui-window" data-options="modal:true,closed:true,minimizable:false,shadow:false"></div>
uploadify-文件上传带进度条
<br />
<img class="expic" id="ExImg1" id="swfUpload" src="/Content/Images/NotPic.jpg" />
<br />
<hr />
<form method="post">   

    <div>
    ajax jquery from文件上传
    <br />
       <input id="Photo" name="Photo" type="hidden" value="">
    <img class="expic" src="/Content/Images/NotPic.jpg" /><br />
    
        <input class="displaynone" type="file" value="" id="FileUpload" name="FileUpload" onchange="Upload('SingleFile', 'Photo', 'FileUpload','1','1');" />
    <a href="javascript:$('#FileUpload').trigger('click').void(0);" class="files"></a><span class="uploading">请稍候...</span>
        </div>

    
</form>
<script>
    //ifram 返回
    function UpLoadImgSucceed(filePath, dif) {
        if (dif == 1) {
            $("#ExImg1").attr("src", filePath);
            frameReturnByMes("上传成功");
            //处理图片逻辑
        } else {

        }
    }
    function frameReturnByClose() {
        $("#modalwindow").window('close');
    }
    function frameReturnByMes(mes) {
        $.messageBox5s('提示', mes);
    }
    $(function () {
        $("#swfUpload").click(function () {
            $("#modalwindow").html("<iframe width='100%' height='100%' scrolling='no' frameborder='0'' src='/SysHelper/UpLoadImg?id=1&Iedate=" + GetGuid() + "'></iframe>");
            $("#modalwindow").window({ title: '上传文件', width: 620, height: 225, iconCls: 'icon-upload' }).window('open');
        });
    });
</script>*@
